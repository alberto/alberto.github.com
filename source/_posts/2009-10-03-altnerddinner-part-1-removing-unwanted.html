---
layout: post
title: "AltNerdDinner: Part 1. Removing unwanted dependencies"
date: 2009-10-03
comments: true
categories:
 - altnerddinner
---

<div class='post'>
<p>The first thing I have done is to set up the project on <a href="http://github.com/">github</a>, so if you want to have a look at the code, check the <a href="http://github.com/alberto/altnerddinner">AltNerdDinner repository</a>. Then I set up the project following the guidelines of my series <a href="http://sharpbites.blogspot.com/2009/09/road-to-continuous-integration.html">Continuous Integration series</a>.</p>  <p>Now we are set, there is some stuff I don't want in AltNerdDinner, so I am mercilessly going to get rid of it.</p>  <h4>Bye, MSTest</h4>  <p>MSTest gives nothing useful beyond integration in VS (for which I prefer ReSharper's Test Runner or TDD.NET). I won't say it sucks, but <a href="http://haacked.com/archive/2007/09/04/should-microsoft-really-bundle-open-source-software.aspx">Phil Haack did</a>. It's just there to satisfy MS-Only shops. It's slow, and it evolves slowly too. It lags behind <a href="http://www.nunit.org/index.php">the</a>&#160;<a href="http://www.gallio.org/">alternative</a> <a href="http://www.codeplex.com/xunit">frameworks</a>. Oh, and it requires VS to be installed on your build server (crazy!), and... </p>  <p>So I replaced it with good ol'&#160; <a href="http://www.nunit.org/index.php">NUnit</a>. It basically involves replacing:</p>  <p>using Microsoft.VisualStudio.TestTools.UnitTesting; by using NUnit.Framework;</p>  <blockquote>   <p>[TestClass] and [TestMethod] by [TestFixture],&#160; and [Test]</p> </blockquote>  <p>and a bunch of calls to Assert.IsInstanceOfType(object, type); by Assert.IsInstanceOf(type, object); (pay attention to the signature change!).</p>  <h4>We don't need no membership provider</h4>  <p>Right now I don't want to deal with membership provider. I think it's bloated and I don't want to have to mess with the authentication right now, so I am going to replace it with a FakeMembershipService for the moment and leave the decision of whether revisiting it or completely replacing it (probably the latter) for a later time.</p>  <h4>LINQ to SQL is dead, long live NHibernate</h4>  <p>L2S is probably a decent option for this kind of simple app, and it's very easy to quickly duct-tape a simple app. It has some goodies, like the visual designer and of course Linq. But it's not the best option if your app gets bigger and you need some more advanced ORM features, like different mapping capabilities or different databases support. It's not a bad tool, but it has <a href="http://codebetter.com/blogs/ian_cooper/archive/2008/07/01/architecting-linq-to-sql-part-10.aspx">some limitations</a> that need to be addressed and, unfortunately, the fact that <a href="http://www.infoq.com/news/2008/11/DLINQ-Future">L2S is being killed</a> means you are better not investing hard into it.</p>  <p>So I am planning to replace it with NHibernate, a mature and tested product&#160; that fits my needs. But just not yet. Right now, I will simply remove the L2S stuff and work with POCOs and an InMemoryRepository implementation (which is basically the FakeDinnerRepository present in the Tests project).</p>  <h5>The model</h5>  <p>As we can see on the picture of the original model, the domain is quite simple.<a href="http://lh3.ggpht.com/_kQ7iivKjVno/SseCJ_ZEG0I/AAAAAAAAAMQ/ehF8shEf9Dg/s1600-h/image11.png"><img style="border-right-width: 0px; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" border="0" alt="image" src="http://lh3.ggpht.com/_kQ7iivKjVno/SseCKvw9G1I/AAAAAAAAAMU/ft6vs8PlB_0/image_thumb9.png?imgmax=800" width="488" height="259" /></a></p>  <p>I have simply created POCO classes replacing the L2S generated ones.</p>  <p>After all the changes, we run all the tests and...</p>  <p><a href="http://lh5.ggpht.com/_kQ7iivKjVno/SseCLKN9WMI/AAAAAAAAAMY/KpeLlk_F18c/s1600-h/testsgreen2.jpg"><img style="border-right-width: 0px; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" border="0" alt="tests-green" src="http://lh5.ggpht.com/_kQ7iivKjVno/SseCL4M-ONI/AAAAAAAAAMc/Nr3Jv3PFVPc/testsgreen_thumb.jpg?imgmax=800" width="184" height="34" /></a></p>  <p>We're done!</p>  </div>
