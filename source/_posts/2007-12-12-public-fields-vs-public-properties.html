---
layout: post
title: "Public fields vs. Public properties"
date: 2007-12-12
comments: true
categories:
 - .net
 - c#
---

<div class='post'>
ScottGu  blogged some time ago, among other interesting things, about the <a href="http://weblogs.asp.net/scottgu/archive/2007/03/08/new-c-orcas-language-features-automatic-properties-object-initializers-and-collection-initializers.aspx">difference between public fields and public properties</a>.<br /><br />I had always seen comments about the convenience of using public properties instead of public fields, but I hadn't seen a real explanation until now. I tought, "why should I bother writing a getter and a setter? If I just use a public Foo field, I can refactor it into a Property if it turns out I have to." It seems <a href="http://www.codinghorror.com/blog/archives/000654.html">I wan't the only one that thought this very same thing</a>.<br /><br />But it turns out there are some differences:<br /><ul><li>You can't databind against a variable. </li><li>Changing a variable to a property is <a href="http://blogs.msdn.com/abhinaba/archive/2006/04/11/572694.aspx">a breaking change</a>. <strong style="font-weight: normal;">When you change a field to a property you need to re-build all code that used that field.</strong>  </li><li>Reflection works differently on variables vs. properties, so if you rely on reflection, it's easier to use all properties.</li></ul>There are some other relevant points in both posts.<br />From Jeff's:<br /><ul><li>Distinguishing public and private using only case is an accident waiting to happen. I still don't have a clear view if I should be using  _bar = bar or this.bar = bar.<br /></li><li>Is it a property or a method? A property should do less work-- a <i>lot</i> less work-- than a method. Properties should be lightweight. If your property incurs significant effort, it should be refactored into an explicit method.</li></ul>From Scott's, there is some <span style="font-size:100%;">syntactic </span>sugar for C#3 (or is it 3.5?):<br /><br /><span style="font-weight: bold;">Automatic Properties</span><br />This cleans up our classes from all the innecesary private fields.</span><br /><pre name="code" class="c-sharp">public class Person {<br />public string FirstName { get; set; }<br />   public string LastName { get; set; } <br />   public int Age { get; set; }<br />}<br /></pre><br /><span style="font-weight: bold;">Object initializers</span><br />Allow you to atomically initialize an object lacking an appropiate constructor. <a href="http://community.bartdesmet.net/blogs/bart/archive/2006/12/04/C_2300_-3.0-Feature-Focus-_2D00_-Part-2-_2D00_-Object-Initializers.aspx">More on this.</a><br /><pre name="code" class="c-sharp">Person person = new Person { FirstName="Scott", LastName="Guthrie", Age=32 };<br /></pre><span style="font-weight: bold;">Collection initializers</span><br />Same annonymous methods, but applied to collections.<br /><pre name="code" class="c-sharp">   List<person> people = new List<person> {<br />    new Person { FirstName = "Scott", LastName = "Guthrie", Age = 32 },<br />    new Person { FirstName = "Bill", LastName = "Gates", Age = 50 },<br />    new Person { FirstName = "Susanne", LastName = "Guthrie", Age = 32 }<br /> };<br /></person></person></pre></div>
